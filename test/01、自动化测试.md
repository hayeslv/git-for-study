## learn-jest项目

### 1、初始化项目

```bash
npm init -y
```

安装jest

```bash
npm i jest @types/jest -D
```

配置执行脚本：package.json

```json
"scripts": {
  "test": "jest"
},
```

初次测试

```js
// add.js
module.exports = (a, b) => {
  return a + b;
}
```

```js
// add.spec.js
const add = require("./add");
test("should return 3 when 1 + 2", () => {
  const a = 1;
  const b = 2;
  const r = add(a, b);
  // jest -> 匹配器
  expect(r).toBe(3)
})
```

执行 `npm run test`



### 2、测试函数的可能性

- return value ：返回一个值
- call other function ：调用其他函数
- change state ：改变状态

**调用其他函数**

```js
// bar.js
module.exports = () => {
  console.log('bar');
}
```

```js
// foo.js
const bar = require('./bar.js')
module.exports = () => {
  bar()
}
```

```js
// foo.spec.js
const foo = require('./foo')
const bar = require('./bar')

jest.mock('./bar.js', () => {
  return jest.fn()
})

test('should call bar', () => {
  foo()
  // 检查bar是否被调用了
  expect(bar).toBeCalled()
})
```





















